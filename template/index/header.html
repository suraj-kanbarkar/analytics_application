<!DOCTYPE html>
{% load i18n %}
{% load static %}
<html xmlns="http://www.w3.org/1999/html">
<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.print.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.1/css/buttons.dataTables.min.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href=""/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="{% static 'color_scatter.css'%}">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
          integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
          crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'pagination.css' %}">
</head>
<style>

body {
      padding: 3em;
      background-color: #85a0be;
      font: 13px/1.4 Geneva, 'Lucida Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, sans-serif;
    }

/* Style the header */
  .header {
  position: absolute
  background-color: #4f2f2f2;
  text-align: left;
 }

  h1 {
    position: relative;
    left: 10px;
    color: #DC143C;
    font-weight: bold;
    text-shadow:0 1px 0 #ccc,
      0 2px 0 #c9c9c9,
      0 3px 0 #bbb,
      0 4px 0 #b9b9b9,
      0 5px 0 #aaa,
      0 6px 1px rgba(0,0,0,.1),
      0 0 5px rgba(0,0,0,.1),
      0 1px 3px rgba(0,0,0,.3),
      0 3px 5px rgba(0,0,0,.2),
      0 5px 10px rgba(0,0,0,.25),
      0 10px 10px rgba(0,0,0,.2),
      0 20px 20px rgba(0,0,0,.15);
    }


 * {
  box-sizing: border-box;
  }

  .btn-xl {
    padding: 40px 60px;
    font-size: 20px;
    border-radius: 10px;
    margin-right: 5px;
    margin-top: 10px;
  }

</style>
<body>
  <form action="validation" method = 'GET'>
    <div class="w3-bar w3-white w3-padding w3-card" style = "position:absolute; left:0px; right:0px; top:92px; background-color:blank;">
        <div class="row">
          <div class="col-25">
            <label for="sdate">Start Date</label>
            <input type="date" id="sdate" name="startdate" required>
            <label for="edate">End Date</label>
            <input type="date" id="edate" name="enddate" required>
            <label for="srvr">Server</label>
            <select id="srvr" name="server" required>
              <option value="">Select Server</option>
              <option value="mysql">Mysql</option>
              <option value="mongodb">MongoDB</option>
              <option value="aws">AWS</option>
            </select>
            <label for="sort-item">File</label>
            <select id="sort-item" name="file" required>
              <option value="">Select File</option>
              <option value="CallEntry To CDR">CallEntry To CDR</option>
              <option value="CDR To CallEntry">CDR To CallEntry</option>
              <option value="CALL ENTRY">CALL ENTRY</option>
              <option value="CALL PROGRESS">CALL PROGRESS</option>
              <option value="CDR">CDR</option>
            </select>
            <script>
                window.onload = function() {
                var selItem = sessionStorage.getItem("SelItem");
                $('#sort-item').val(selItem);
                }
                $('#sort-item').change(function() {
                    var selVal = $(this).val();
                    sessionStorage.setItem("SelItem", selVal);
                });
            </script>
            <input type="submit" value="Load File">
          </div>
        </div>
    </div>
  </form>
  <div class="container_2">
      <form action="#" method = 'GET'>
        <p> Tables and Graphs</p>
          <a href="{% url 'call_entry_to_cdr' %}" type="button" class="btn btn-default "><i class="fa fa-table"></i>  CallEntry To CDR</a>
          <a href="{% url 'cdr_to_call_entry' %}" type="button" class="btn btn-default"><i class="fa fa-table"></i>  CDR To CallEntry</a>
          <a href="{% url 'call_entry' %}" type="button" class="btn btn-default" ><i class="fa fa-table"></i>  CALL ENTRY</a>
          <a href="{% url 'call_progress' %}" type="button" class="btn btn-default" ><i class="fa fa-table"></i> CALL PROGRESS</a>
          <a href="{% url 'cdr' %}" type="button" class="btn btn-default" ><i class="fa fa-table"></i> CDR</a>
      </form>
  </div>
  <div style = "position:absolute; left:500px; right:0px; top:230px;"> {% block chart %} {% endblock %} </div>
  {% if items %}
  <div class="w3-bar w3-white w3-padding w3-card" style = "position:absolute; width: 86%; left:200px; right:0px; top:153px;"> {% block tables %} {% endblock %} </div>
  {% endif %}
  <!--        <button class="download_btn"  href="{% url 'send_file' %}"><i class="fa fa-download"></i> Download File</button>-->
  <!--          <button type="button" id="download">Get File!</button>-->
      <script type="text/javascript">
       $(document).ready(function() {
                      $('#download').click(function(){
                          var s_date = $('#sdate').val()
                          var e_date = $('#edate').val()
                          var server = $('#server').val()
                          var file = $('#file').val()
                          $.ajax({
                          type:"GET",
                          url : "http://localhost:8000/index?startdate=" + s_date + '&enddate=' + e_date + '&server=' + server + '&file=' + file,
                          data:{ } , // do I need to pass data if im GET ting?
                          dataType: 'json',
                          success : function(data){
                             console.log('Success')
                          },

                      });//end ajax
                    });//end click
                  });//end rdy
      </script>
</body>
</html>
